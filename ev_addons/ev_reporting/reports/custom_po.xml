<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Inherit the PO report template. Template name may vary by version.
       Common one: purchase.report_purchaseorder_document -->
  <template id="report_purchaseorder_inherit" inherit_id="purchase.report_purchaseorder_document">
    <xpath expr="//table[contains(@class,'table')]/thead/tr" position="inside">
      <!-- Add a new header column -->
      <th>Supplier Ref</th>
    </xpath>

    <xpath expr="//table[contains(@class,'table')]/tbody/tr" position="inside">
      <!-- For each line, insert supplier reference cell. We rely on 'o' as purchase.order in template context -->
      <td t-esc="o.partner_ref or ''"/>
    </xpath>

    <!-- Add a new block near top showing supplier reference next to order ref -->
    <xpath expr="//div[@class='page']/div[descendant::h2]" position="after">
      <div class="row">
        <div class="col-6">
          <strong>Supplier Reference:</strong>
          <span t-field="o.partner_ref"/>
        </div>
      </div>
    </xpath>
  </template>
</odoo>
