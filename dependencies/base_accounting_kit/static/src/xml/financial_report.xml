<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t t-name="base_accounting_kit.financial_report_template">
        <Layout display="{ controlPanel: {} }">
              <t t-set-slot="control-panel-create-button">
                <button t-on-click="print" type="button" class="btn btn-primary" title="Print">Print</button>
                <button t-on-click="xlsx" type="button" class="btn btn-secondary" title="Xlsx">Xlsx</button>
            </t>
            <t t-set-slot="default">
                <div class="reprot-container">
                    <div class="modern-report-card">
                        <div class="modern-report-header">
                            <table class="modern-report-header-table">
                                <tr>
                                    <td>
                                        <h2 class="modern-report-title" t-esc="context.data.data['form']['account_report_id'][1]"/>
                                    </td>
                                    <td>
                                        <div class="modern-year-badge">
                                            <span t-esc="context.data.report_year"/>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="modern-balance-header" style="padding-bottom: 12px; border-bottom: 1px solid #e0e0e0; margin-bottom: 16px;">
                            Balance
                        </div>

                        <div class="modern-report-lines">
                            <t t-foreach="context.data.report_lines" t-key="line.id" t-as="line">
                                <t t-if="line.level != 0">
                                    <t t-set="line_level" t-value="line.level || 1"/>
                                    

                                    <t t-set="is_highlighted" t-value="line_level == 1"/>
                                    <t t-set="is_arrow_highlighted" t-value="line_level == 2"/>
                                    <t t-set="is_bold" t-value="line_level == 3"/>
                                    <t t-set="indent_px" t-value="(line_level - 1) * 20"/>
                                    <t t-set="lang" t-value="props.action.context.lang"/>
                                    <t t-set="is_rtl" t-value="lang &amp;&amp; ['ar', 'he', 'fa', 'ur', 'yi', 'ji'].includes(lang.split('_')[0])"/>
                                    <t t-set="padding_style" t-value="is_rtl ? ('padding-right: ' + indent_px + 'px;') : ('padding-left: ' + indent_px + 'px;')"/>
                                    <t t-set="chevron_symbol" t-value="is_rtl ? '◀' : '▶'"/>

                                    <div t-attf-class="modern-report-line #{((is_highlighted || is_arrow_highlighted) &amp;&amp; 'modern-report-line-highlight') || ''} #{(is_bold &amp;&amp; 'modern-report-line-bold') || ''}">
                                        <table class="modern-report-line-table">
                                            <tr>
                                                <td t-att-style="padding_style">
                                                    <div class="modern-line-name">
                                                        <t t-if="is_arrow_highlighted">
                                                            <span class="modern-line-chevron" t-esc="chevron_symbol"/>
                                                        </t>
                                                        <span class="modern-line-content" t-att-style="(is_bold &amp;&amp; 'font-weight: 600;') || ''">
                                                            <span t-esc="line['name']"/>
                                                        </span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="modern-line-balance">
                                                        <span >
                                                            <span t-esc="line['balance']"/>
                                                        </span>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </t>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </Layout>
    </t>
</templates>
